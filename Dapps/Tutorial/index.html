



<!DOCTYPE html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="以太坊中文文档">
      
      
      
        <meta name="author" content="Nosy">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="zh">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.5">
    
    
      
        <title>开发指南 - 以太坊文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.bcabdff3.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="indigo" data-md-color-accent="indigo">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="以太坊文档" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                以太坊文档
              </span>
              <span class="md-header-nav__topic">
                开发指南
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/wohugb/ethereum-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/ethereum-docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="前言" class="md-tabs__link">
        前言
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Basics/introduction/" title="基础" class="md-tabs__link">
          基础
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../White-Paper/" title="白皮书" class="md-tabs__link">
          白皮书
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Clients/" title="客户端" class="md-tabs__link">
          客户端
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../Safety/" title="ÐApp开发" class="md-tabs__link md-tabs__link--active">
          ÐApp开发
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Infrastructure/Chain-Spec-Format/" title="基础设施" class="md-tabs__link">
          基础设施
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Research/Proof-of-Stake-FAQ/" title="研究" class="md-tabs__link">
          研究
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../D3VTechnologies/RLP/" title="ÐΞV技术" class="md-tabs__link">
          ÐΞV技术
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Technologies/Patricia-Tree/" title="以太坊技术" class="md-tabs__link">
          以太坊技术
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../EthashDashimoto/" title="挖矿算法" class="md-tabs__link">
          挖矿算法
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Whisper/" title="私语" class="md-tabs__link">
          私语
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Misc/Problems/" title="杂项" class="md-tabs__link">
          杂项
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    以太坊文档
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/wohugb/ethereum-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/ethereum-docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="前言" class="md-nav__link">
      前言
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../home/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      基础
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        基础
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/introduction/" title="介绍" class="md-nav__link">
      介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Getting-Ether/" title="获取以太币" class="md-nav__link">
      获取以太币
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/dapps/" title="无心应用" class="md-nav__link">
      无心应用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Design-Rationale/" title="设计原理" class="md-nav__link">
      设计原理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Yellow-Paper/" title="黄皮书" class="md-nav__link">
      黄皮书
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Releases/" title="发布" class="md-nav__link">
      发布
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Wishlist/" title="愿望清单" class="md-nav__link">
      愿望清单
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      白皮书
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        白皮书
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/history/" title="历史" class="md-nav__link">
      历史
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Ethereum/" title="以太坊" class="md-nav__link">
      以太坊
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Applications/" title="应用" class="md-nav__link">
      应用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Miscellanea-And-Concerns/" title="杂项" class="md-nav__link">
      杂项
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Conclusion/" title="结论" class="md-nav__link">
      结论
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Notes-and-Further-Reading/" title="更多" class="md-nav__link">
      更多
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      客户端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        客户端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/go-ethereum/" title="Geth (Go)" class="md-nav__link">
      Geth (Go)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/parity/" title="Parity (Rust)" class="md-nav__link">
      Parity (Rust)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/pyethapp/" title="pyethapp (Python)" class="md-nav__link">
      pyethapp (Python)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/cpp-ethereum/" title="cpp-ethereum (C++)" class="md-nav__link">
      cpp-ethereum (C++)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/ethereumj/" title="ethereumj (Java)" class="md-nav__link">
      ethereumj (Java)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      ÐApp开发
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        ÐApp开发
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Safety/" title="安全技术" class="md-nav__link">
      安全技术
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Resources/" title="开发资源" class="md-nav__link">
      开发资源
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JavaScript-API/" title="JS API" class="md-nav__link">
      JS API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JSON-RPC/" title="JSON RPC API" class="md-nav__link">
      JSON RPC API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../solidity/" title="Solidity" class="md-nav__link">
      Solidity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solidity-Features/" title="Solidity 特色" class="md-nav__link">
      Solidity 特色
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solidity-Collections/" title="Solidity 合集" class="md-nav__link">
      Solidity 合集
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../solidity-cheatsheet/" title="Solidity 备忘单" class="md-nav__link">
      Solidity 备忘单
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Useful-Ðapp-Patterns/" title="有用的Ðapp模式" class="md-nav__link">
      有用的Ðapp模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Standardized_Contract_APIs/" title="标准化合约接口" class="md-nav__link">
      标准化合约接口
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Using-Meteor/" title="使用Meteor" class="md-nav__link">
      使用Meteor
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        开发指南
      </label>
    
    <a href="./" title="开发指南" class="md-nav__link md-nav__link--active">
      开发指南
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-machine" title="State Machine" class="md-nav__link">
    State Machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gas" title="Gas" class="md-nav__link">
    Gas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtual-machine-opcodes" title="Virtual machine opcodes" class="md-nav__link">
    Virtual machine opcodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basics-of-the-ethereum-blockchain" title="Basics of the Ethereum Blockchain" class="md-nav__link">
    Basics of the Ethereum Blockchain
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphical-interfaces-outdated-api" title="Graphical Interfaces (OUTDATED API)" class="md-nav__link">
    Graphical Interfaces (OUTDATED API)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fine-points-to-keep-track-of" title="Fine Points To Keep Track Of" class="md-nav__link">
    Fine Points To Keep Track Of
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Mix-IDE/" title="Mix 指南" class="md-nav__link">
      Mix 指南
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Mix-Features/" title="Mix 特色" class="md-nav__link">
      Mix 特色
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../viper/" title="Viper" class="md-nav__link">
      Viper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Serpent/" title="Serpent" class="md-nav__link">
      Serpent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LLL/" title="LLL" class="md-nav__link">
      LLL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mutan/" title="Mutan" class="md-nav__link">
      Mutan
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      基础设施
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        基础设施
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Chain-Spec-Format/" title="链规范格式" class="md-nav__link">
      链规范格式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Inter-exchange-Client-Address-Protocol/" title="地址互换协议" class="md-nav__link">
      地址互换协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/URL-Hint-Protocol/" title="网址提示协议" class="md-nav__link">
      网址提示协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/NatSpec-Determination/" title="自然规格确认" class="md-nav__link">
      自然规格确认
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Network-Status/" title="网络状态" class="md-nav__link">
      网络状态
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Raspberry-Pi-instructions/" title="树莓派" class="md-nav__link">
      树莓派
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Exchange-Integration/" title="交易一体化" class="md-nav__link">
      交易一体化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Mining/" title="挖矿" class="md-nav__link">
      挖矿
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Licensing/" title="许可" class="md-nav__link">
      许可
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Consortium-Chain-Development/" title="联盟链开发" class="md-nav__link">
      联盟链开发
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      研究
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        研究
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Research/Proof-of-Stake-FAQ/" title="权益证明" class="md-nav__link">
      权益证明
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Research/Sharding-FAQ/" title="分片区块链" class="md-nav__link">
      分片区块链
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      ÐΞV技术
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        ÐΞV技术
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/RLP/" title="RLP 编码" class="md-nav__link">
      RLP 编码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/Node-discovery-protocol/" title="节点发现协议" class="md-nav__link">
      节点发现协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/Wire-Protocol/" title="ÐΞVp2p 有线协议" class="md-nav__link">
      ÐΞVp2p 有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/libp2p-Whitepaper/" title="ÐΞVp2p 白皮书" class="md-nav__link">
      ÐΞVp2p 白皮书
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/Web3-Secret-Storage-Definition/" title="Web3 秘密存储" class="md-nav__link">
      Web3 秘密存储
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      以太坊技术
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        以太坊技术
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Patricia-Tree/" title="词树" class="md-nav__link">
      词树
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Ethereum-Wire-Protocol/" title="有线协议" class="md-nav__link">
      有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Light-client-protocol/" title="轻端协议" class="md-nav__link">
      轻端协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Subtleties/" title="玄机" class="md-nav__link">
      玄机
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Solidity/" title="固语言" class="md-nav__link">
      固语言
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Ethereum-Natural-Specification-Format/" title="NatSpec格式" class="md-nav__link">
      NatSpec格式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Ethereum-Contract-ABI/" title="合同ABI" class="md-nav__link">
      合同ABI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Bad-Block-Reporting/" title="坏块报告" class="md-nav__link">
      坏块报告
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Technologies/Bad-Chain-Canary/" title="坏链金丝雀" class="md-nav__link">
      坏链金丝雀
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      挖矿算法
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        挖矿算法
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/Ethash/" title="Ethash" class="md-nav__link">
      Ethash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/Ethash-C-API/" title="Ethash C API" class="md-nav__link">
      Ethash C API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/Ethash-DAG/" title="Ethash DAG" class="md-nav__link">
      Ethash DAG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      私语
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        私语
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/" title="低语提议" class="md-nav__link">
      低语提议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/Overview/" title="耳语概述" class="md-nav__link">
      耳语概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/Wire-Protocol/" title="PoC-1 有线协议" class="md-nav__link">
      PoC-1 有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/PoC-2-Wire-Protocol/" title="PoC-2 有线协议" class="md-nav__link">
      PoC-2 有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/PoC-2-Protocol-Spec/" title="PoC-2 白皮书" class="md-nav__link">
      PoC-2 白皮书
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      杂项
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        杂项
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Misc/Problems/" title="加密货币的难题" class="md-nav__link">
      加密货币的难题
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Misc/Chain-Fibers-Redux/" title="链条纤维" class="md-nav__link">
      链条纤维
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Misc/Glossary/" title="词汇表" class="md-nav__link">
      词汇表
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-machine" title="State Machine" class="md-nav__link">
    State Machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gas" title="Gas" class="md-nav__link">
    Gas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtual-machine-opcodes" title="Virtual machine opcodes" class="md-nav__link">
    Virtual machine opcodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basics-of-the-ethereum-blockchain" title="Basics of the Ethereum Blockchain" class="md-nav__link">
    Basics of the Ethereum Blockchain
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphical-interfaces-outdated-api" title="Graphical Interfaces (OUTDATED API)" class="md-nav__link">
    Graphical Interfaces (OUTDATED API)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fine-points-to-keep-track-of" title="Fine Points To Keep Track Of" class="md-nav__link">
    Fine Points To Keep Track Of
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>开发指南</h1>
                
                <p>The purpose of this page is to serve as an introduction to the basics of Ethereum that you will need to understand from a development standpoint, in order to produce contracts and decentralized applications. For a general introduction to Ethereum, see <a href="https://github.com/ethereum/wiki/wiki/White-Paper">the white paper</a>, and for a full technical spec see the <a href="http://gavwood.com/Paper.pdf">yellow</a> papers, although those are not prerequisites for this page; that is to say, this page is meant as an alternative introduction to Ethereum specifically targeted towards application developers.</p>
<h3 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h3>
<p>Ethereum is a platform that is intended to allow people to easily write decentralized applications (Đapps) using blockchain technology. A decentralized application is an application which serves some specific purpose to its users, but which has the important property that the application itself does not depend on any specific party existing. Rather than serving as a front-end for selling or providing a specific party's services, a Đapp is a tool for people and organizations on different sides of an interaction used to come together without any centralized intermediary.</p>
<p>Even necessary "intermediary" functions that are typically the domain of centralized providers, such as filtering, identity management, escrow and dispute resolution, are either handled directly by the network or left open for anyone to participate, using tools like internal token systems and reputation systems to ensure that users get access to high-quality services. Early examples of Đapps include BitTorrent for file sharing and Bitcoin for currency. Ethereum takes the primary developments used by BitTorrent and Bitcoin, the peer to peer network and the blockchain, and generalizes them in order to allow developers to use these technologies for any purpose.</p>
<p>The Ethereum blockchain can be alternately described as a blockchain with a built-in programming language, or as a consensus-based globally executed virtual machine. The part of the protocol that actually handles internal state and computation is referred to as the Ethereum Virtual Machine (EVM). From a practical standpoint, the EVM can be thought of as a large decentralized computer containing millions of objects, called "accounts", which have the ability to maintain an internal database, execute code and talk to each other.</p>
<p>There are two types of accounts:</p>
<ol>
<li><strong>Externally owned account (EOAs)</strong>: an account controlled by a private key, and if you own the private key associated with the EOA you have the ability to send ether and messages from it.</li>
<li><strong>Contract</strong>: an account that has its own code, and is controlled by code.</li>
</ol>
<p>By default, the Ethereum execution environment is lifeless; nothing happens and the state of every account remains the same. However, any user can trigger an action by sending a transaction from an externally owned account, setting Ethereum's wheels in motion. If the destination of the transaction is another EOA, then the transaction may transfer some ether but otherwise does nothing. However, if the destination is a contract, then the contract in turn activates, and automatically runs its code.</p>
<p>The code has the ability to read/write to its own internal storage (a database mapping 32-byte keys to 32-byte values), read the storage of the received message, and send messages to other contracts, triggering their execution in turn. Once execution stops, and all sub-executions triggered by a message sent by a contract stop (this all happens in a deterministic and synchronous order, ie. a sub-call completes fully before the parent call goes any further), the execution environment halts once again, until woken by the next transaction.</p>
<p>Contracts generally serve four purposes:</p>
<ol>
<li>
<p>Maintain a data store representing something which is useful to either other contracts or to the outside world; one example of this is a contract that simulates a currency, and another is a contract that records membership in a particular organization.</p>
</li>
<li>
<p>Serve as a sort of externally owned account with a more complicated access policy; this is called a "forwarding contract" and typically involves simply resending incoming messages to some desired destination only if certain conditions are met; for example, one can have a forwarding contract that waits until two out of a given three private keys have confirmed a particular message before resending it (ie. multisig). More complex forwarding contracts have different conditions based on the nature of the message sent; the simplest use case for this functionality is a withdrawal limit that is overrideable via some more complicated access procedure.</p>
</li>
<li>
<p>Manage an ongoing contract or relationship between multiple users. Examples of this include a financial contract, an escrow with some particular set of mediators, or some kind of insurance. One can also have an open contract that one party leaves open for any other party to engage with at any time; one example of this is a contract that automatically pays a bounty to whoever submits a valid solution to some mathematical problem, or proves that it is providing some computational resource.</p>
</li>
<li>
<p>Provide functions to other contracts; essentially serving as a software library.</p>
</li>
</ol>
<p>Contracts interact with each other through an activity that is alternately called either "calling" or "sending messages". A "message" is an object containing some quantity of ether (a special internal currency used in Ethereum with the primary purpose of paying transaction fees), a byte-array of data of any size, the addresses of a sender and a recipient. When a contract receives a message it has the option of returning some data, which the original sender of the message can then immediately use. In this way, sending a message is exactly like calling a function.</p>
<p>Because contracts can play such different roles, we expect that contracts will be interacting with each other. As an example, consider a situation where Alice and Bob are betting 100 GavCoin that the temperature in San Francisco will not exceed 35ºC at any point in the next year. However, Alice is very security-conscious, and as her primary account uses a forwarding contract which only sends messages with the approval of two out of three private keys. Bob is paranoid about quantum cryptography, so he uses a forwarding contract which passes along only messages that have been signed with <a href="https://en.wikipedia.org/wiki/Lamport_signature">Lamport signatures</a> alongside traditional ECDSA (but because he's old fashioned, he prefers to use a version of Lamport sigs based on SHA256, which is not supported in Ethereum directly).</p>
<p>The betting contract itself needs to fetch data about the San Francisco weather from some contract, and it also needs to talk to the GavCoin contract when it wants to actually send the GavCoin to either Alice or Bob (or, more precisely, Alice or Bob's forwarding contract). We can show the relationships between the accounts thus:</p>
<p><img alt="img" src="https://raw.githubusercontent.com/ethereumbuilders/GitBook/master/en/vitalik-diagrams/contract_relationship.png" /></p>
<p>When Bob wants to finalize the bet, the following steps happen:</p>
<ol>
<li>A transaction is sent, triggering a message from Bob's EOA to Bob's forwarding contract.</li>
<li>Bob's forwarding contract sends the hash of the message and the Lamport signature to a contract which functions as a Lamport signature verification library.</li>
<li>The Lamport signature verification library sees that Bob wants a SHA256-based Lamport sig, so it calls the SHA256 library many times as needed to verify the signature.</li>
<li>Once the Lamport signature verification library returns 1, signifying that the signature has been verified, it sends a message to the contract representing the bet.</li>
<li>The bet contract checks the contract providing the San Francisco temperature to see what the temperature is.</li>
<li>The bet contract sees that the response to the messages shows that the temperature is above 35ºC, so it sends a message to the GavCoin contract to move the GavCoin from its account to Bob's forwarding contract.</li>
</ol>
<p>Note that the GavCoin is all "stored" as entries in the GavCoin contract's database; the word "account" in the context of step 6 simply means that there is a data entry in the GavCoin contract storage with a key for the bet contract's address and a value for its balance. After receiving this message, the GavCoin contract decreases this value by some amount and increases the value in the entry corresponding to Bob's forwarding contract's address. We can see these steps in the following diagram:</p>
<p><img alt="img" src="https://raw.githubusercontent.com/ethereumbuilders/GitBook/master/en/vitalik-diagrams/contract_relationship2.png?1" /></p>
<h3 id="state-machine">State Machine<a class="headerlink" href="#state-machine" title="Permanent link">&para;</a></h3>
<p>Computation in the EVM is done using a stack-based bytecode language that is like a cross between Bitcoin Script, traditional assembly and Lisp (the Lisp part being due to the recursive message-sending functionality). A program in EVM is a sequence of opcodes, like this:</p>
<div class="codehilite"><pre><span></span>PUSH1 0 CALLDATALOAD SLOAD NOT PUSH1 9 JUMPI STOP JUMPDEST PUSH1 32 CALLDATALOAD PUSH1 0 CALLDATALOAD SSTORE
</pre></div>


<p>The purpose of this particular contract is to serve as a name registry; anyone can send a message containing 64 bytes of data, 32 for the key and 32 for the value. The contract checks if the key has already been registered in storage, and if it has not been then the contract registers the value at that key.</p>
<p>During execution, an infinitely expandable byte-array called "memory", the "program counter" pointing to the current instruction, and a stack of 32-byte values is maintained. At the start of execution, memory and stack are empty and the PC is zero. Now, let us suppose the contract with this code is being accessed for the first time, and a message is sent in with 123 wei (10<sup>18</sup> wei = 1 ether) and 64 bytes of data where the first 32 bytes encode the number 54 and the second 32 bytes encode the number 2020202020.</p>
<p>Thus, the state at the start is:</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">0</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>The instruction at position 0 is PUSH1, which pushes a one-byte value onto the stack and jumps two steps in the code. Thus, we have:</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">2</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>The instruction at position 2 is CALLDATALOAD, which pops one value from the stack, loads the 32 bytes of message data starting from that index, and pushes that on to the stack. Recall that the first 32 bytes here encode 54.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">3</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">54</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>SLOAD pops one from the stack and checks if there is a value in storage for the key popped from the stack. If so, it pushes the value into the stack at the current index. Since the contract is used for the first time, the storage is empty and no value is found for the popped key. Therefore, SLOAD pushes zero to the stack.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">4</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>NOT pops one value and pushes 1 if the value is zero, else 0</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">5</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>Next, we PUSH1 9.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">7</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">9</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>The JUMPI instruction pops 2 values and jumps to the instruction designated by the first only if the second is nonzero. Here, the second is nonzero, so we jump. If the value in storage index 54 had not been zero, then the second value from top on the stack would have been 0 (due to NOT), so we would not have jumped, and we would have advanced to the STOP instruction which would have led to us stopping execution.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">9</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>Here, we PUSH1 32.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">11</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">32</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>Now, we CALLDATALOAD again, popping 32 and pushing the bytes in message data starting from byte 32 until byte 63.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">13</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">2020202020</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>Next, we PUSH1 0.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">14</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">2020202020</span><span class="o">,</span> <span class="mi">0</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>Now, we load message data bytes 0-31 again (loading message data is just as cheap as loading memory, so we don't bother to save it in memory)</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">16</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[</span><span class="mi">2020202020</span><span class="o">,</span> <span class="mi">54</span><span class="o">]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{}</span>
</pre></div>


<p>Finally, we SSTORE to save the value 2020202020 in storage at index 54.</p>
<div class="codehilite"><pre><span></span><span class="n">PC</span><span class="o">:</span> <span class="mi">17</span> <span class="n">STACK</span><span class="o">:</span> <span class="o">[]</span> <span class="n">MEM</span><span class="o">:</span> <span class="o">[],</span> <span class="n">STORAGE</span><span class="o">:</span> <span class="o">{</span><span class="mi">54</span><span class="o">:</span> <span class="mi">2020202020</span><span class="o">}</span>
</pre></div>


<p>At index 17, there is no instruction, so we stop. If there was anything left in the stack or memory, it would be deleted, but the storage will stay and be available next time someone sends a message. Thus, if the sender of this message sends the same message again (or perhaps someone else tries to reregister 54 to 3030303030), the next time the <code>JUMPI</code> at position 7 would not process, and execution would STOP early at position 8.</p>
<p>Fortunately, you do not have to program in low-level assembly; a high-level language exists, especially designed for writing contracts, known as <a href="https://github.com/ethereum/wiki/wiki/Solidity">Solidity</a> exists to make it much easier for you to write contracts (there are several others, too, including <a href="https://github.com/ethereum/cpp-ethereum/wiki/LLL-PoC-5">LLL</a>, <a href="https://github.com/ethereum/wiki/wiki/Serpent">Serpent</a> and <a href="https://github.com/ethereum/go-ethereum/wiki/Mutan-0.2">Mutan</a>, which you may find easier to learn or use depending on your experience). Any code you write in these languages gets compiled into EVM, and to create the contracts you send the transaction containing the EVM bytecode.</p>
<p>There are two types of transactions: a sending transaction and a contract creating transaction. A sending transaction is a standard transaction, containing a receiving address, an ether amount, a data bytearray and some other parameters, and a signature from the private key associated with the sender account. A contract creating transaction looks like a standard transaction, except the receiving address is blank. When a contract creating transaction makes its way into the blockchain, the data bytearray in the transaction is interpreted as EVM code, and the value returned by that EVM execution is taken to be the code of the new contract; hence, you can have a transaction do certain things during initialization. The address of the new contract is deterministically calculated based on the sending address and the number of times that the sending account has made a transaction before (this value, called the account nonce, is also kept for unrelated security reasons). Thus, the full code that you need to put onto the blockchain to produce the above name registry is as follows:</p>
<div class="codehilite"><pre><span></span>PUSH1 16 DUP PUSH1 12 PUSH1 0 CODECOPY PUSH1 0 RETURN STOP PUSH1 0 CALLDATALOAD SLOAD NOT PUSH1 9 JUMPI STOP PUSH1 32 CALLDATALOAD PUSH1 0 CALLDATALOAD SSTORE
</pre></div>


<p>The key opcodes are CODECOPY, copying the 16 bytes of code starting from byte 12 into memory starting at index 0, and RETURN, returning memory bytes 0-16, ie. code bytes 12-28 (feel free to "run" the execution manually on paper to verify that those parts of the code and memory actually get copied and returned). Code bytes 12-28 are, of course, the actual code as we saw above.</p>
<h3 id="gas">Gas<a class="headerlink" href="#gas" title="Permanent link">&para;</a></h3>
<p>One important aspect of the way the EVM works is that every single operation that is executed inside the EVM is actually simultaneously executed by every full node. This is a necessary component of the Ethereum 1.0 consensus model, and has the benefit that any contract on the EVM can call any other contract at almost zero cost, but also has the drawback that computational steps on the EVM are very expensive. Roughly, a good heuristic to use is that you will not be able to do anything on the EVM that you cannot do on a smartphone from 1999. Acceptable uses of the EVM include running business logic ("if this then that") and verifying signatures and other cryptographic objects; at the upper limit of this are applications that verify parts of other blockchains (eg. a decentralized ether-to-bitcoin exchange); unacceptable uses include using the EVM as a file storage, email or text messaging system, anything to do with graphical interfaces, and applications best suited for cloud computing like genetic algorithms, graph analysis or machine learning.</p>
<p>In order to prevent deliberate attacks and abuse, the Ethereum protocol charges a fee per computational step. The fee is market-based, though mandatory in practice; a floating limit on the number of operations that can be contained in a block forces even miners who can afford to include transactions at close to no cost to charge a fee commensurate with the cost of the transaction to the entire network; see <a href="https://github.com/ethereum/wiki/wiki/%5BEnglish%5D-White-Paper#fees">the whitepaper section on fees</a> for more details on the economic underpinnings of our fee and block operation limit system.</p>
<p>The way the fee works is as follows. Every transaction must contain, alongside its other data, a <code>GASPRICE</code> and <code>STARTGAS</code> value. <code>STARTGAS</code> is the amount of "gas" that the transaction assigns itself, and <code>GASPRICE</code> is the fee that the transaction pays per unit of gas; thus, when a transaction is sent, the first thing that is done during evaluation is subtracting <code>STARTGAS * GASPRICE</code> wei plus the transaction's value from the sending account balance. <code>GASPRICE</code> is set by the transaction sender, but miners will likely refuse to process transactions whose <code>GASPRICE</code> is too low.</p>
<p>Gas can be roughly thought of as a counter of computational steps, and is something that exists during transaction execution but not outside of it. When transaction execution starts, the gas remaining is set to <code>STARTGAS - 21000 - 68 * TXDATALEN</code> where <code>TXDATALEN</code> is the number of bytes in transaction data (note: zero bytes are charged only 4 gas due to the greater compressibility of long strings of zero bytes). Every computational step, a certain amount (usually 1, sometimes more depending on the operation) of gas is subtracted from the total. If gas goes down to zero, then all execution reverts, but the transaction is still valid and the sender still has to pay for gas. If transaction execution finishes with <code>N &gt;= 0</code> gas remaining, then the sending account is refunded with <code>N * GASPRICE</code> wei.</p>
<p>During contract execution, when a contract sends a message, that message call itself comes with a gas limit, and the sub-execution works the same way (namely, it can either run out of gas and revert or execute successfully and return a value). If sub-execution runs out of gas, the parent execution continues; thus, it is perfectly "safe" for a contract to call another contract if you set a gas limit on the sub-execution. If sub-execution has some gas remaining, then that gas is returned to the parent execution to continue using.</p>
<h3 id="virtual-machine-opcodes">Virtual machine opcodes<a class="headerlink" href="#virtual-machine-opcodes" title="Permanent link">&para;</a></h3>
<p>A complete listing of the opcodes in the EVM can be found in the <a href="http://gavwood.com/Paper.pdf">yellow paper</a>. Note that high-level languages will often have their own wrappers for these opcodes, sometimes with very different interfaces.</p>
<h3 id="basics-of-the-ethereum-blockchain">Basics of the Ethereum Blockchain<a class="headerlink" href="#basics-of-the-ethereum-blockchain" title="Permanent link">&para;</a></h3>
<p>The Ethereum blockchain (or "ledger") is the decentralized, massively replicated database in which the current state of all accounts is stored. The blockchain uses a database called a <a href="https://github.com/ethereum/wiki/wiki/Patricia-Tree">Patricia tree</a> (or "trie") to store all accounts; this is essentially a specialized kind of Merkle tree that acts as a generic key/value store. Like a standard Merkle tree, a Patricia tree has a "root hash" that can be used to refer to the entire tree, and the contents of the tree cannot be modified without changing the root hash. For each account, the tree stores a 4-tuple containing <code>[account_nonce, ether_balance, code_hash, storage_root]</code>, where <code>account_nonce</code> is the number of transactions sent from the account (kept to prevent replay attacks), <code>ether_balance</code> is the balance of the account, <code>code_hash</code> the hash of the code if the account is a contract and "" otherwise, and <code>storage_root</code> is the root of yet another Patricia tree which stores the storage data.</p>
<p><img alt="we" src="https://raw.githubusercontent.com/ethereumbuilders/GitBook/master/en/vitalik-diagrams/chaindiag.png" /></p>
<p>Every minute, a miner produces a new block (the concept of mining in Ethereum is exactly the same as in Bitcoin; see any Bitcoin tutorial for more info on this), and that block contains a list of transactions that happened since the last block and the root hash of the Patricia tree representing the new state ("state tree") after applying those transactions and giving the miner an ether reward for creating the block.</p>
<p>Because of the way the Patricia tree works, if few changes are made then most parts of the tree will be exactly the same as in the last block; hence, there is no need to store data twice as nodes in the new tree will simply be able to point back to the same memory address that stores the nodes of the old tree in places where the new tree and the old tree are exactly the same. If a thousand pieces of data are changed between block <code>N</code> and block <code>N + 1</code>, even if the total size of the tree is many gigabytes, the amount of new data that needs to be stored for block <code>N + 1</code> is at most a few hundred kilobytes and often substantially less (especially if multiple changes happen inside the same contract). Every block contains the hash of the previous block (this is what makes the block set a "chain") as well as ancillary data like the block number, timestamp, address of the miner and gas limit.</p>
<h3 id="graphical-interfaces-outdated-api">Graphical Interfaces (<em>OUTDATED API</em>)<a class="headerlink" href="#graphical-interfaces-outdated-api" title="Permanent link">&para;</a></h3>
<p>A contract by itself is a powerful thing, but it is not a complete Đapp. A Đapp, rather, is defined as a combination of a contract and a graphical interface for using that contract (note: this is only true for now; future versions of Ethereum will include whisper, a protocol for allowing nodes in a Đapp to send direct peer-to-peer messages to each other without the blockchain). Right now, the interface is implemented as an HTML/CSS/JS webpage, with a special Javascript API in the form of the <code>eth</code> object for working with the Ethereum blockchain. The key parts of the Javascript API are as follows:</p>
<ul>
<li><code>eth.transact(from, ethervalue, to, data, gaslimit, gasprice)</code> - sends a transaction to the desired address from the desired address (note: <code>from</code> must be a private key and <code>to</code> must be an address in hex form) with the desired parameters</li>
<li><code>(string).pad(n)</code> - converts a number, encoded as a string, to binary form <code>n</code> bytes long</li>
<li><code>eth.gasPrice</code> - returns the current gas price</li>
<li><code>eth.secretToAddress(key)</code> - converts a private key into an address</li>
<li><code>eth.storageAt(acct, index)</code> - returns the desired account's storage entry at the desired index</li>
<li><code>eth.key</code> - the user's private key</li>
<li><code>eth.watch(acct, index, f)</code> - calls <code>f</code> when the given storage entry of the given account changes</li>
</ul>
<p>You do not need any special source file or library to use the <code>eth</code> object; however, your Đapp will only work when opened in an Ethereum client, not a regular web browser. For an example of the Javascript API being used in practice, see <a href="http://gavwood.com/gavcoin.html">the source code of this webpage</a>.</p>
<h3 id="fine-points-to-keep-track-of">Fine Points To Keep Track Of<a class="headerlink" href="#fine-points-to-keep-track-of" title="Permanent link">&para;</a></h3>
<p>See <a href="https://github.com/ethereum/wiki/wiki/Subtleties">https://github.com/ethereum/wiki/wiki/Subtleties</a></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Using-Meteor/" title="使用Meteor" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                使用Meteor
              </span>
            </div>
          </a>
        
        
          <a href="../Mix-IDE/" title="Mix 指南" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                Mix 指南
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            版权 &copy; 2018 -  wohugb.github.io
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://wohugb.github.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/wohugb" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/wohugb" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/wohugb" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.6cdc17f0.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../assets/javascripts/lunr/lunr.zh.js"></script>
            
          
          
        
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>