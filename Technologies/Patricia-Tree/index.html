



<!DOCTYPE html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="以太坊中文文档">
      
      
      
        <meta name="author" content="Nosy">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="zh">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.5">
    
    
      
        <title>词树 - 以太坊文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.bcabdff3.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="indigo" data-md-color-accent="indigo">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="以太坊文档" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                以太坊文档
              </span>
              <span class="md-header-nav__topic">
                词树
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/wohugb/ethereum-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/ethereum-docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="前言" class="md-tabs__link">
        前言
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Basics/introduction/" title="基础" class="md-tabs__link">
          基础
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../White-Paper/" title="白皮书" class="md-tabs__link">
          白皮书
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Clients/" title="客户端" class="md-tabs__link">
          客户端
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Dapps/Safety/" title="ÐApp开发" class="md-tabs__link">
          ÐApp开发
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Infrastructure/Chain-Spec-Format/" title="基础设施" class="md-tabs__link">
          基础设施
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Research/Proof-of-Stake-FAQ/" title="研究" class="md-tabs__link">
          研究
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../D3VTechnologies/RLP/" title="ÐΞV技术" class="md-tabs__link">
          ÐΞV技术
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" title="以太坊技术" class="md-tabs__link md-tabs__link--active">
          以太坊技术
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../EthashDashimoto/" title="挖矿算法" class="md-tabs__link">
          挖矿算法
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Whisper/" title="私语" class="md-tabs__link">
          私语
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Misc/Problems/" title="杂项" class="md-tabs__link">
          杂项
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    以太坊文档
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/wohugb/ethereum-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/ethereum-docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="前言" class="md-nav__link">
      前言
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../home/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      基础
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        基础
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/introduction/" title="介绍" class="md-nav__link">
      介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Getting-Ether/" title="获取以太币" class="md-nav__link">
      获取以太币
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/dapps/" title="无心应用" class="md-nav__link">
      无心应用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Design-Rationale/" title="设计原理" class="md-nav__link">
      设计原理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Yellow-Paper/" title="黄皮书" class="md-nav__link">
      黄皮书
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Releases/" title="发布" class="md-nav__link">
      发布
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Basics/Wishlist/" title="愿望清单" class="md-nav__link">
      愿望清单
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      白皮书
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        白皮书
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/history/" title="历史" class="md-nav__link">
      历史
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Ethereum/" title="以太坊" class="md-nav__link">
      以太坊
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Applications/" title="应用" class="md-nav__link">
      应用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Miscellanea-And-Concerns/" title="杂项" class="md-nav__link">
      杂项
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Conclusion/" title="结论" class="md-nav__link">
      结论
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../White-Paper/Notes-and-Further-Reading/" title="更多" class="md-nav__link">
      更多
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      客户端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        客户端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/go-ethereum/" title="Geth (Go)" class="md-nav__link">
      Geth (Go)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/parity/" title="Parity (Rust)" class="md-nav__link">
      Parity (Rust)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/pyethapp/" title="pyethapp (Python)" class="md-nav__link">
      pyethapp (Python)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/cpp-ethereum/" title="cpp-ethereum (C++)" class="md-nav__link">
      cpp-ethereum (C++)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clients/ethereumj/" title="ethereumj (Java)" class="md-nav__link">
      ethereumj (Java)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      ÐApp开发
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        ÐApp开发
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Safety/" title="安全技术" class="md-nav__link">
      安全技术
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Resources/" title="开发资源" class="md-nav__link">
      开发资源
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/JavaScript-API/" title="JS API" class="md-nav__link">
      JS API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/JSON-RPC/" title="JSON RPC API" class="md-nav__link">
      JSON RPC API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/solidity/" title="Solidity" class="md-nav__link">
      Solidity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Solidity-Features/" title="Solidity 特色" class="md-nav__link">
      Solidity 特色
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Solidity-Collections/" title="Solidity 合集" class="md-nav__link">
      Solidity 合集
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/solidity-cheatsheet/" title="Solidity 备忘单" class="md-nav__link">
      Solidity 备忘单
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Useful-Ðapp-Patterns/" title="有用的Ðapp模式" class="md-nav__link">
      有用的Ðapp模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Standardized_Contract_APIs/" title="标准化合约接口" class="md-nav__link">
      标准化合约接口
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Using-Meteor/" title="使用Meteor" class="md-nav__link">
      使用Meteor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Tutorial/" title="开发指南" class="md-nav__link">
      开发指南
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Mix-IDE/" title="Mix 指南" class="md-nav__link">
      Mix 指南
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Mix-Features/" title="Mix 特色" class="md-nav__link">
      Mix 特色
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/viper/" title="Viper" class="md-nav__link">
      Viper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/Serpent/" title="Serpent" class="md-nav__link">
      Serpent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/LLL/" title="LLL" class="md-nav__link">
      LLL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Dapps/mutan/" title="Mutan" class="md-nav__link">
      Mutan
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      基础设施
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        基础设施
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Chain-Spec-Format/" title="链规范格式" class="md-nav__link">
      链规范格式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Inter-exchange-Client-Address-Protocol/" title="地址互换协议" class="md-nav__link">
      地址互换协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/URL-Hint-Protocol/" title="网址提示协议" class="md-nav__link">
      网址提示协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/NatSpec-Determination/" title="自然规格确认" class="md-nav__link">
      自然规格确认
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Network-Status/" title="网络状态" class="md-nav__link">
      网络状态
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Raspberry-Pi-instructions/" title="树莓派" class="md-nav__link">
      树莓派
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Exchange-Integration/" title="交易一体化" class="md-nav__link">
      交易一体化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Mining/" title="挖矿" class="md-nav__link">
      挖矿
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Licensing/" title="许可" class="md-nav__link">
      许可
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Infrastructure/Consortium-Chain-Development/" title="联盟链开发" class="md-nav__link">
      联盟链开发
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      研究
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        研究
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Research/Proof-of-Stake-FAQ/" title="权益证明" class="md-nav__link">
      权益证明
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Research/Sharding-FAQ/" title="分片区块链" class="md-nav__link">
      分片区块链
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      ÐΞV技术
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        ÐΞV技术
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/RLP/" title="RLP 编码" class="md-nav__link">
      RLP 编码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/Node-discovery-protocol/" title="节点发现协议" class="md-nav__link">
      节点发现协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/Wire-Protocol/" title="ÐΞVp2p 有线协议" class="md-nav__link">
      ÐΞVp2p 有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/libp2p-Whitepaper/" title="ÐΞVp2p 白皮书" class="md-nav__link">
      ÐΞVp2p 白皮书
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../D3VTechnologies/Web3-Secret-Storage-Definition/" title="Web3 秘密存储" class="md-nav__link">
      Web3 秘密存储
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" checked>
    
    <label class="md-nav__link" for="nav-10">
      以太坊技术
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        以太坊技术
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        词树
      </label>
    
    <a href="./" title="词树" class="md-nav__link md-nav__link--active">
      词树
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="词树规范" class="md-nav__link">
    词树规范
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="根词树" class="md-nav__link">
    根词树
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="主要规范" class="md-nav__link">
    主要规范
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="优化" class="md-nav__link">
    优化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="规范" class="md-nav__link">
    规范
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="示例" class="md-nav__link">
    示例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="以太坊词树" class="md-nav__link">
    以太坊词树
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" title="状态词树" class="md-nav__link">
    状态词树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="存储词树" class="md-nav__link">
    存储词树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" title="交易词树" class="md-nav__link">
    交易词树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="收入词树" class="md-nav__link">
    收入词树
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ethereum-Wire-Protocol/" title="有线协议" class="md-nav__link">
      有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Light-client-protocol/" title="轻端协议" class="md-nav__link">
      轻端协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Subtleties/" title="玄机" class="md-nav__link">
      玄机
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solidity/" title="固语言" class="md-nav__link">
      固语言
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ethereum-Natural-Specification-Format/" title="NatSpec格式" class="md-nav__link">
      NatSpec格式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ethereum-Contract-ABI/" title="合同ABI" class="md-nav__link">
      合同ABI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Bad-Block-Reporting/" title="坏块报告" class="md-nav__link">
      坏块报告
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Bad-Chain-Canary/" title="坏链金丝雀" class="md-nav__link">
      坏链金丝雀
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      挖矿算法
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        挖矿算法
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/Ethash/" title="Ethash" class="md-nav__link">
      Ethash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/Ethash-C-API/" title="Ethash C API" class="md-nav__link">
      Ethash C API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EthashDashimoto/Ethash-DAG/" title="Ethash DAG" class="md-nav__link">
      Ethash DAG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      私语
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        私语
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/" title="低语提议" class="md-nav__link">
      低语提议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/Overview/" title="耳语概述" class="md-nav__link">
      耳语概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/Wire-Protocol/" title="PoC-1 有线协议" class="md-nav__link">
      PoC-1 有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/PoC-2-Wire-Protocol/" title="PoC-2 有线协议" class="md-nav__link">
      PoC-2 有线协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Whisper/PoC-2-Protocol-Spec/" title="PoC-2 白皮书" class="md-nav__link">
      PoC-2 白皮书
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      杂项
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        杂项
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Misc/Problems/" title="加密货币的难题" class="md-nav__link">
      加密货币的难题
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Misc/Chain-Fibers-Redux/" title="链条纤维" class="md-nav__link">
      链条纤维
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Misc/Glossary/" title="词汇表" class="md-nav__link">
      词汇表
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="词树规范" class="md-nav__link">
    词树规范
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="根词树" class="md-nav__link">
    根词树
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="主要规范" class="md-nav__link">
    主要规范
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="优化" class="md-nav__link">
    优化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="规范" class="md-nav__link">
    规范
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="示例" class="md-nav__link">
    示例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="以太坊词树" class="md-nav__link">
    以太坊词树
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" title="状态词树" class="md-nav__link">
    状态词树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" title="存储词树" class="md-nav__link">
    存储词树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" title="交易词树" class="md-nav__link">
    交易词树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" title="收入词树" class="md-nav__link">
    收入词树
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">梅克尔帕特里夏树<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">词树规范<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>梅克尔帕特里夏词树(也叫梅克尔帕特里夏树) provide a cryptographically authenticated data structure that can be used to store all (key, value) bindings, although for the scope of this paper we are restricting keys and values to strings (to remove this restriction, just use any serialization format for other data types). They are fully deterministic, meaning that a Patricia 词树 with the same (key,value) bindings is guaranteed to be exactly the same down to the last byte and therefore have the same root hash, provide the holy grail of O(log(n)) efficiency for inserts, lookups and deletes, and are much easier to understand and code than more complex comparison-based alternatives like red-black 词树s.</p>
<h3 id="_3">根词树<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>In a basic radix 词树, every node looks as follows:</p>
<div class="codehilite"><pre><span></span>[i0, i1 ... in, value]
</pre></div>


<p>Where <code>i0 ... in</code> represent the symbols of the alphabet (often binary or hex), <code>value</code> is the terminal value at the node, and the values in the <code>i0 ... in</code> slots are either <code>NULL</code> or pointers to (in our case, hashes of) other nodes. This forms a basic (key, value) store; for example, if you are interested in the value that is currently mapped to <code>dog</code> in the 词树, you would first convert <code>dog</code> into letters of the alphabet (giving <code>64 6f 67</code>), and then descend down the 词树 following that path until at the end of the path you read the value. That is, you would first look up the root hash in a flat key/value DB to find the root node of the 词树 (which is basically an array of keys to other nodes), use the value at index <code>6</code> as a key (and look it up in the flat key/value DB) to get the node one level down, then pick index <code>4</code> of that to lookup the next value, then pick index <code>6</code> of that, and so on, until, once you followed the path: <code>root -&gt; 6 -&gt; 4 -&gt; 6 -&gt; 15 -&gt; 6 -&gt; 7</code>, you look up the value of the node that you have and return the result.</p>
<p>Note there is a difference between looking something up in the "词树" vs the underlying flat key/value "DB". They both define key/values arrangements, but the underlying DB can do a traditional 1 step lookup of a key, while looking up a key in the 词树 requires multiple underlying DB lookups to get to the final value as described above. To eliminate ambiguity, let's refer to the latter as a <code>path</code>.</p>
<p>The update and delete operations for radix 词树s are simple, and can be defined roughly as follows:</p>
<div class="codehilite"><pre><span></span>def update(node,path,value):
    if path == &#39;&#39;:
        curnode = db.get(node) if node else [ NULL ] * 17
        newnode = curnode.copy()
        newnode[-1] = value
    else:
        curnode = db.get(node) if node else [ NULL ] * 17
        newnode = curnode.copy()
        newindex = update(curnode[path[0]],path[1:],value)
        newnode[path[0]] = newindex
    db.put(hash(newnode),newnode)
    return hash(newnode)

def delete(node,path):
    if node is NULL:
        return NULL
    else:
        curnode = db.get(node)
        newnode = curnode.copy()
        if path == &#39;&#39;:
            newnode[-1] = NULL
        else:
            newindex = delete(curnode[path[0]],path[1:])
            newnode[path[0]] = newindex

        if len(filter(x -&gt; x is not NULL, newnode)) == 0:
            return NULL
        else:
            db.put(hash(newnode),newnode)
            return hash(newnode)
</pre></div>


<p>The "Merkle" part of the radix 词树 arises in the fact that a deterministic cryptographic hash of a node is used as the pointer to the node (for every lookup in the key/value DB <code>key == sha3(rlp(value))</code>, rather than some 32-bit or 64-bit memory location as might happen in a more traditional 词树 implemented in C. This provides a form of cryptographic authentication to the data structure; if the root hash of a given 词树 is publicly known, then anyone can provide a proof that the 词树 has a given value at a specific path by providing the nodes going up each step of the way. It is impossible for an attacker to provide a proof of a (path, value) pair that does not exist since the root hash is ultimately based on all hashes below it, so any modification would change the root hash.</p>
<p>While traversing a path 1 nibble at a time as described above, most nodes contain a 17-element array. 1 index for each possible value held by the next hex character (nibble) in the path, and 1 to hold the final target value in the case that the path has been fully traversed. These 17-element array nodes are called <code>branch</code> nodes.</p>
<h2 id="_4">主要规范<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>然而, 根词树有一个主要限制: 他们的效率低下. If you want to store just one (path,value) binding where the path is (in the case of the ethereum state 词树), 64 characters long (number of nibbles in <code>bytes32</code>), you will need over a kilobyte of extra space to store one level per character, and each lookup or delete will take the full 64 steps. The Patricia 词树 introduced here solves this issue.</p>
<h3 id="_5">优化<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>梅克尔帕特里夏词树s solve the inefficiency issue by adding some extra complexity to the data structure. A node in a 梅克尔帕特里夏词树 is one of the following:</p>
<ol>
<li><code>NULL</code> (represented as the empty string)</li>
<li><code>branch</code> A 17-item node <code>[ v0 ... v15, vt ]</code></li>
<li><code>leaf</code> A 2-item node <code>[ encodedPath, value ]</code></li>
<li><code>extension</code> A 2-item node <code>[ encodedPath, key ]</code></li>
</ol>
<p>With 64 character paths it is inevitable that after traversing the first few layers of the 词树, you will reach a node where no divergent path exists for at least part of the way down. It would be naive to require such a node to have empty values in every index (one for each of the 16 hex characters) besides the target index (next nibble in the path). Instead we shortcut the descent by setting up a <code>extension</code> node of the form <code>[ encodedPath, key ]</code>, where <code>encodedPath</code> contains the "partial path" to skip ahead (using compact encoding described below), and the <code>key</code> is for the next db lookup.</p>
<p>In the case of a <code>leaf</code> node, which can be determined by a flag in the first nibble of <code>encodedPath</code>, the situation above occurs and also the "partial path" to skip ahead completes the full remainder of a path. In this case <code>value</code> is the target value itself.</p>
<p>The optimization above however introduces some ambiguity.</p>
<p>When traversing paths in nibbles, we may end up with an odd number of nibbles to traverse, but because all data is stored in <code>bytes</code> format, it is not possible to differentiate between, for instance, the nibble <code>1</code>, and the nibbles <code>01</code> (both must be stored as <code>&lt;01&gt;</code>). To specify odd length, the partial path is prefixed with a flag.</p>
<h3 id="_6">规范<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p><strong>十六进制序列与可选终止符的紧凑编码</strong></p>
<p>The flagging of both <em>odd vs. even remaining partial path length</em> and <em>leaf vs. extension node</em> as described above reside in the first nibble of the partial path of any 2-item node. They result in the following:</p>
<div class="codehilite"><pre><span></span><span class="gh">hex char    bits    |    node type partial     path length</span>
<span class="gh">----------------------------------------------------------</span>
   0        0000    |       extension              even
   1        0001    |       extension              odd
   2        0010    |   terminating (leaf)         even
   3        0011    |   terminating (leaf)         odd
</pre></div>


<p>For even remaining path length (<code>0</code> or <code>2</code>), another <code>0</code> "padding" nibble will always follow.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">compact_encode</span><span class="p">(</span><span class="n">hexarray</span><span class="p">):</span>
        <span class="n">term</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">hexarray</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">16</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">term</span><span class="p">:</span> <span class="n">hexarray</span> <span class="o">=</span> <span class="n">hexarray</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">oddlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hexarray</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">term</span> <span class="o">+</span> <span class="n">oddlen</span>
        <span class="k">if</span> <span class="n">oddlen</span><span class="p">:</span>
            <span class="n">hexarray</span> <span class="o">=</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span> <span class="o">+</span> <span class="n">hexarray</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hexarray</span> <span class="o">=</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">hexarray</span>
        <span class="o">//</span> <span class="n">hexarray</span> <span class="n">now</span> <span class="n">has</span> <span class="n">an</span> <span class="n">even</span> <span class="n">length</span> <span class="n">whose</span> <span class="n">first</span> <span class="n">nibble</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">flags</span><span class="o">.</span>
        <span class="n">o</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">hexarray</span><span class="p">),</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">o</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="n">hexarray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">hexarray</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">o</span>
</pre></div>

<p>示例:</p>
<div class="codehilite"><pre><span></span>&gt; [ 1, 2, 3, 4, 5, ...]
&#39;11 23 45&#39;
&gt; [ 0, 1, 2, 3, 4, 5, ...]
&#39;00 01 23 45&#39;
&gt; [ 0, f, 1, c, b, 8, 10]
&#39;20 0f 1c b8&#39;
&gt; [ f, 1, c, b, 8, 10]
&#39;3f 1c b8&#39;
</pre></div>


<p>Here is the extended code for getting a node in the 梅克尔帕特里夏词树:</p>
<div class="codehilite"><pre><span></span>def get_helper(node,path):
    if path == []: return node
    if node = &#39;&#39;: return &#39;&#39;
    curnode = rlp.decode(node if len(node) &lt; 32 else db.get(node))
    if len(curnode) == 2:
        (k2, v2) = curnode
        k2 = compact_decode(k2)
        if k2 == path[:len(k2)]:
            return get(v2, path[len(k2):])
        else:
            return &#39;&#39;
    elif len(curnode) == 17:
        return get_helper(curnode[path[0]],path[1:])

def get(node,path):
    path2 = []
    for i in range(len(path)):
        path2.push(int(ord(path[i]) / 16))
        path2.push(ord(path[i]) % 16)
    path2.push(16)
    return get_helper(node,path2)
</pre></div>


<h3 id="_7">示例<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>Suppose we want a 词树 containing four path/value pairs  <code>('do', 'verb')</code>, <code>('dog', 'puppy')</code>, <code>('doge', 'coin')</code>, <code>('horse', 'stallion')</code>.</p>
<p>First, we convert both paths and values to <code>bytes</code>. Below, actual byte representations for <em>paths</em> are denoted by <code>&lt;&gt;</code>, although <em>values</em> are still shown as strings, denoted by <code>''</code>, for easier comprehension (they, too, would actually be <code>bytes</code>):</p>
<div class="codehilite"><pre><span></span>&lt;64 6f&gt; : &#39;verb&#39;
&lt;64 6f 67&gt; : &#39;puppy&#39;
&lt;64 6f 67 65&gt; : &#39;coin&#39;
&lt;68 6f 72 73 65&gt; : &#39;stallion&#39;
</pre></div>


<p>Now, we build such a 词树 with the following key/value pairs in the underlying DB:</p>
<div class="codehilite"><pre><span></span>rootHash: [ &lt;16&gt;, hashA ]
hashA:    [ &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, hashB, &lt;&gt;, &lt;&gt;, &lt;&gt;, hashC, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt; ]
hashC:    [ &lt;20 6f 72 73 65&gt;, &#39;stallion&#39; ]
hashB:    [ &lt;00 6f&gt;, hashD ]
hashD:    [ &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, hashE, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &#39;verb&#39; ]
hashE:    [ &lt;17&gt;, hashF ]
hashF:    [ &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, hashG, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &#39;puppy&#39; ]
hashG:    [ &lt;35&gt;, &#39;coin&#39; ]
</pre></div>


<p>When one node is referenced inside another node, what is included is <code>H(rlp.encode(x))</code>, where <code>H(x) = sha3(x) if len(x) &gt;= 32 else x</code> and <code>rlp.encode</code> is the <a href="https://github.com/ethereum/wiki/wiki/RLP">RLP</a> encoding function.</p>
<p>Note that when updating a 词树, one needs to store the key/value pair <code>(sha3(x), x)</code> in a persistent lookup table <em>if</em> the newly-created node has length &gt;= 32. However, if the node is shorter than that, one does not need to store anything, since the function f(x) = x is reversible.</p>
<h3 id="_8">以太坊词树<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>以太坊里的所有词树使用一个梅克尔帕特里夏词树.</p>
<p>块首重有三个个根，来源于三个词树.</p>
<ol>
<li>stateRoot</li>
<li>transactionsRoot</li>
<li>receiptsRoot</li>
</ol>
<h4 id="_9">状态词树<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>There is one global state 词树, and it updates over time. In it, a <code>path</code> is always: <code>sha3(ethereumAddress)</code> and a <code>value</code> is always: <code>rlp(ethereumAccount)</code>. More specifically an ethereum <code>account</code> is a 4 item array of <code>[nonce,balance,storageRoot,codeHash]</code>. At this point it's worth noting that this <code>storageRoot</code> is the root of another patricia 词树:</p>
<h4 id="_10">存储词树<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>Storage 词树 is where <em>all</em> contract data lives. There is a separate storage 词树 for each account. A <code>path</code> in this 词树 is somewhat complex but they depend on <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_getstorageat">this</a>.</p>
<h4 id="_11">交易词树<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>There is a separate transactions 词树 for every block. A <code>path</code> here is: <code>rlp(transactionIndex)</code>. <code>transactionIndex</code> is its index within the block it's mined. The ordering is mostly decided by a miner so this data is unknown until mined. After a block is mined, the transaction 词树 never updates.</p>
<h4 id="_12">收入词树<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>Every block has its own Receipts 词树. A <code>path</code> here is: <code>rlp(transactionIndex)</code>. <code>transactionIndex</code> is its index within the block it's mined. Never updates.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../D3VTechnologies/Web3-Secret-Storage-Definition/" title="Web3 秘密存储" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                Web3 秘密存储
              </span>
            </div>
          </a>
        
        
          <a href="../Ethereum-Wire-Protocol/" title="有线协议" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                有线协议
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            版权 &copy; 2018 -  wohugb.github.io
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://wohugb.github.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/wohugb" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/wohugb" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/wohugb" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.6cdc17f0.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../assets/javascripts/lunr/lunr.zh.js"></script>
            
          
          
        
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>